import{j as t}from"./jsx-runtime.D_zvdyIk.js";import{r as d}from"./index.2yJIXLcc.js";import{B as S}from"./index.BlACm4Ui.js";import"./iconBase.Blz05Vck.js";const b=({sizeOption:n})=>{const[o,l]=d.useState(!1),[w,m]=d.useState("Select One"),h=d.useRef(null),g=(s,c)=>{const i=new URLSearchParams(window.location.search);i.set(s.toLowerCase(),c);const e=`${window.location.pathname}?${i.toString()}`;window.history.replaceState({},"",e)},f=s=>{m(s),g(n.name,s),l(!1)};return d.useEffect(()=>{(()=>{const e=new URLSearchParams(window.location.search).get(n.name.toLowerCase());e&&n.values.includes(e)&&m(e)})();const c=i=>{h.current&&!h.current.contains(i.target)&&l(!1)};return document.addEventListener("mousedown",c),()=>document.removeEventListener("mousedown",c)},[n]),t.jsxs("div",{className:"w-72 relative",ref:h,children:[t.jsxs("button",{className:"w-full py-2 pl-3 pr-10 text-left bg-light rounded-md cursor-pointer sm:text-sm focus:outline-none",onClick:()=>l(!o),children:[t.jsx("span",{className:"block truncate text-text-light",children:w}),t.jsx("span",{className:"absolute inset-y-0 right-0 flex items-center pr-2",children:t.jsx("svg",{className:`h-5 w-5 text-text-light transform transition-transform ${o?"rotate-180":""}`,fill:"currentColor",viewBox:"0 0 20 20","aria-hidden":"true",children:t.jsx("path",{fillRule:"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z",clipRule:"evenodd"})})})]}),o&&t.jsx("ul",{className:"absolute z-20 mt-1 max-h-60 w-full bg-white shadow-lg rounded-md overflow-auto ring-1 ring-black/5 focus:outline-none",children:n?.values?.map(s=>t.jsx("li",{className:"py-2 px-4 cursor-pointer hover:bg-dark/50 hover:text-white text-text-light",onClick:()=>f(s),children:s},s))})]})},v=n=>{const o={};return n.forEach(l=>{l.altText in o||(o[l.altText]=l.url)}),o};function z({options:n,variants:o,images:l}){const[w,m]=d.useState({color:void 0,size:void 0}),h=v(l);d.useEffect(()=>{const e=new URLSearchParams(window.location.search),a=e.get("color"),r=e.get("size");m({color:a,size:r})},[]);const g=(e,a)=>{const r=new URLSearchParams(window.location.search);r.set(e,a),window.history.replaceState({},"",`${window.location.pathname}?${r.toString()}`)},f=(e,a)=>{m(r=>({...r,[e]:a})),g(e,a)},s=o.map(e=>({id:e.id,availableForSale:e.availableForSale,...e.selectedOptions.reduce((a,r)=>({...a,[r.name.toLowerCase()]:r.value}),{})})),c=n.filter(e=>!(e.name==="Title"&&e.values.includes("Default Title"))),i=n.find(e=>e.name==="Size");return t.jsxs("div",{children:[c.map(e=>t.jsxs("div",{children:[t.jsx("h5",{className:"mb-2 max-md:text-base",children:e.name==="Size"?"":e.name}),t.jsx("div",{className:"flex flex-wrap gap-3",children:e.values.map(a=>{const r=e.name.toLowerCase(),u=s.find(p=>p[r]===a&&p.availableForSale),x=w[r]===a;return e.name==="Size"?null:t.jsx("div",{children:t.jsx("button",{"aria-disabled":!u,disabled:!u,onClick:()=>f(r,a),title:`${e.name} ${a}${u?"":" (Out of Stock)"}`,className:`flex min-w-[48px] items-center justify-center rounded-md border border-border text-sm cursor-pointer ${x&&e.name!=="Color"?"cursor-default ring-2 ring-dark dark:ring-darkmode-dark":""} ${!x&&u&&e.name!=="Color"?"ring-1 ring-transparent transition duration-300 ease-in-out hover:scale-110 hover:ring-dark hover:dark:ring-darkmode-dark":""} ${u?"":"relative z-10 cursor-not-allowed overflow-hidden bg-neutral-100 text-neutral-500 dark:bg-neutral-900 dark:text-neutral-400"}`,children:e.name==="Color"?t.jsxs("div",{className:`relative rounded-md overflow-hidden ${x?"outline-1 outline-dark dark:outline-darkmode-dark":""}`,children:[t.jsx("img",{src:h[a],alt:a,width:50,height:50,className:`${x?"opacity-80":""}`}),x&&t.jsx("span",{className:"text-inherit h-full opacity-100 absolute top-2 right-2",children:t.jsx(S,{size:35})})]}):a})},a)})})]},e.id)),i&&t.jsxs("div",{className:"mb-8 mt-8",children:[t.jsx("h5",{className:"mb-2 max-md:text-base",children:i.name}),t.jsx(b,{sizeOption:i,selectedSize:w.size,onSizeChange:e=>f("size",e)})]})]})}export{z as VariantSelector};

import{j as s}from"./jsx-runtime.D_zvdyIk.js";import{s as Y}from"./textConverter.DDUr2VB2.js";import{a as he,g as be,r as U}from"./index.2yJIXLcc.js";import{B as xe}from"./index.BlACm4Ui.js";import ge from"./ShowTags.D49Wz1Gi.js";import{c as ve}from"./config.CNacUmJe.js";import"./iconBase.Blz05Vck.js";var V={},D;function Ce(){if(D)return V;D=1;var p=V&&V.__createBinding||(Object.create?function(e,o,c,d){d===void 0&&(d=c),Object.defineProperty(e,d,{enumerable:!0,get:function(){return o[c]}})}:function(e,o,c,d){d===void 0&&(d=c),e[d]=o[c]}),L=V&&V.__setModuleDefault||(Object.create?function(e,o){Object.defineProperty(e,"default",{enumerable:!0,value:o})}:function(e,o){e.default=o}),T=V&&V.__importStar||function(e){if(e&&e.__esModule)return e;var o={};if(e!=null)for(var c in e)c!=="default"&&Object.prototype.hasOwnProperty.call(e,c)&&p(o,e,c);return L(o,e),o};Object.defineProperty(V,"__esModule",{value:!0});const a=T(he());let k=null,j=null;const v=(e,o)=>{let c=e.ruler===void 0||e.ruler===null?!0:e.ruler,d=e.label===void 0||e.label===null?!0:e.label,K=e.subSteps===void 0||e.subSteps===null?!1:e.subSteps,$=e.stepOnly===void 0||e.stepOnly===null?!1:e.stepOnly,u=e.preventWheel===void 0||e.preventWheel===null?!1:e.preventWheel,b=(0,a.useRef)(null),l=+(e.min||0),i=+(e.max||100),x=Math.abs(+(e.step||5)),R=0,y=!!e.disabled,m=e.canMinMaxValueSame?0:x,W=Math.floor((+i-+l)/+x),O=e.labels||[];O.length===0?(O=[],O.push(l.toString()),O.push(i.toString())):W=O.length-1,typeof d=="string"&&(d=d==="true"),typeof c=="string"&&(c=c==="true"),typeof u=="string"&&(u=u==="true"),x.toString().includes(".")&&(R=2);let E=e.minValue;E==null&&(E=25),E=+E;let S=e.maxValue;S==null&&(S=75),S=+S,E<l&&(E=l),E>i&&(E=i),S<E&&(S=+E+ +x),S>i&&(S=i),S<l&&(S=l);const[f,B]=(0,a.useState)(+E),[h,P]=(0,a.useState)(+S),[G,H]=(0,a.useState)((f-l)/(i-l)*100),[J,Q]=(0,a.useState)((i-h)/(i-l)*100),[Z,ee]=(0,a.useState)(""),[te,ne]=(0,a.useState)(""),[z,w]=(0,a.useState)(!0),ae=n=>{if(y)return;let t=f-x;t<l&&(t=l),B(t)},le=n=>{if(y)return;let t=parseFloat(n.target.value);t>h-m&&(t=h-m),B(t),w(!0)},re=n=>{if(y)return;let t=n.clientX,X=n.target.parentNode.getBoundingClientRect(),I=f;w(!1);let N=_=>{let F=(_.clientX-t)/X.width,r=I+(i-l)*F;$&&(r=Math.round(r/x)*x),r=parseFloat(r.toFixed(R)),r<l?r=l:r>h-m&&(r=h-m),B(r)},M=_=>{w(!0),document.removeEventListener("mousemove",N),document.removeEventListener("mouseup",M)};document.addEventListener("mousemove",N),document.addEventListener("mouseup",M)},ie=n=>{if(y)return;let t=n.touches[0].clientX,X=n.target.parentNode.getBoundingClientRect(),I=f;w(!1);let N=_=>{let F=(_.touches[0].clientX-t)/X.width,r=I+(i-l)*F;$&&(r=Math.round(r/x)*x),r=parseFloat(r.toFixed(R)),r<l?r=l:r>h-m&&(r=h-m),B(r)},M=_=>{w(!0),document.removeEventListener("touchmove",N),document.removeEventListener("touchend",M)};document.addEventListener("touchmove",N),document.addEventListener("touchend",M)},se=n=>{if(y)return;let t=f+x;t>h-m&&(t=h-m),B(t)},ue=n=>{if(y)return;let t=h-x;t<f+m&&(t=f+m),P(t)},oe=n=>{if(y)return;let t=parseFloat(n.target.value);t<f+m&&(t=f+m),P(t),w(!0)},ce=n=>{if(y)return;let t=n.clientX,X=n.target.parentNode.getBoundingClientRect(),I=h;w(!1);let N=_=>{let F=(_.clientX-t)/X.width,r=I+(i-l)*F;$&&(r=Math.round(r/x)*x),r=parseFloat(r.toFixed(R)),r<f+m?r=f+m:r>i&&(r=i),P(r)},M=_=>{w(!0),document.removeEventListener("mousemove",N),document.removeEventListener("mouseup",M)};document.addEventListener("mousemove",N),document.addEventListener("mouseup",M)},de=n=>{if(y)return;let t=n.touches[0].clientX,X=n.target.parentNode.getBoundingClientRect(),I=h;w(!1);let N=_=>{let F=(_.touches[0].clientX-t)/X.width,r=I+(i-l)*F;$&&(r=Math.round(r/x)*x),r=parseFloat(r.toFixed(R)),r<f+m?r=f+m:r>i&&(r=i),P(r)},M=_=>{w(!0),document.removeEventListener("touchmove",N),document.removeEventListener("touchend",M)};document.addEventListener("touchmove",N),document.addEventListener("touchend",M)},me=n=>{if(y)return;let t=h+x;t>i&&(t=i),P(t)},fe=n=>{if(y||u===!0||!n.shiftKey&&!n.ctrlKey)return;let t=(i-l)/100;t>1&&(t=1),n.deltaY<0&&(t=-t);let g=f,C=h;n.shiftKey&&n.ctrlKey?g+t>=l&&C+t<=i&&(g=g+t,C=C+t):n.ctrlKey?(t=C+t,t<g+m?t=g+m:t>i&&(t=i),C=t):n.shiftKey&&(t=g+t,t<l?t=l:t>C-m&&(t=C-m),g=t),w(!1),P(C),B(g),k&&window.clearTimeout(k),k=window.setTimeout(()=>{w(!0)},100)};return(0,a.useEffect)(()=>{b&&b.current&&b.current.parentNode.addEventListener("wheel",g=>{!g.shiftKey&&!g.ctrlKey||g.preventDefault()})},[b]),(0,a.useEffect)(()=>{if(h<f)throw new Error("maxValue is less than minValue");const n=()=>{let C={min:l,max:i,minValue:f,maxValue:h};z&&e.onChange&&e.onChange(C),e.onInput&&e.onInput(C)};ee(e.minCaption||f.toFixed(R)),ne(e.maxCaption||h.toFixed(R));let t=(f-l)/(i-l)*100;H(t);let g=(i-h)/(i-l)*100;Q(g),j&&window.clearTimeout(j),j=window.setTimeout(n,20)},[f,h,l,i,R,e,z]),(0,a.useEffect)(()=>{let n=e.minValue;n==null&&(n=25),n=+n,n<l&&(n=l),n>i&&(n=i),w(!1),B(+n)},[e.minValue,l,i]),(0,a.useEffect)(()=>{let n=e.maxValue;n==null&&(n=75),n=+n,n>i&&(n=i),n<l&&(n=l),w(!1),P(+n)},[e.maxValue,l,i,x]),a.default.createElement("div",{ref:o,id:e.id,className:(e.baseClassName||"multi-range-slider")+" "+(e.className||"")+(y?" disabled":""),style:e.style,onWheel:fe},a.default.createElement("div",{className:"bar",ref:b},a.default.createElement("div",{className:"bar-left",style:{width:G+"%",backgroundColor:e.barLeftColor},onClick:ae}),a.default.createElement("input",{placeholder:"min-value",className:"input-type-range input-type-range-min",type:"range",min:l,max:i,step:x,value:f,onInput:le}),a.default.createElement("div",{className:"thumb thumb-left",style:{backgroundColor:e.thumbLeftColor},onMouseDown:re,onTouchStart:ie},a.default.createElement("div",{className:"caption"},a.default.createElement("span",{className:"min-caption"},Z))),a.default.createElement("div",{className:"bar-inner",style:{backgroundColor:e.barInnerColor}},a.default.createElement("div",{className:"bar-inner-left",onClick:se}),a.default.createElement("div",{className:"bar-inner-right",onClick:ue})),a.default.createElement("input",{placeholder:"max-value",className:"input-type-range input-type-range-max",type:"range",min:l,max:i,step:x,value:h,onInput:oe}),a.default.createElement("div",{className:"thumb thumb-right",style:{backgroundColor:e.thumbRightColor},onMouseDown:ce,onTouchStart:de},a.default.createElement("div",{className:"caption"},a.default.createElement("span",{className:"max-caption"},te))),a.default.createElement("div",{className:"bar-right",style:{width:J+"%",backgroundColor:e.barRightColor},onClick:me})),c&&a.default.createElement("div",{className:"ruler"},[...Array(W)].map((n,t)=>a.default.createElement("div",{key:t,className:"ruler-rule"},K&&[...Array(10)].map((g,C)=>a.default.createElement("div",{key:C,className:"ruler-sub-rule"}))))),d&&a.default.createElement("div",{className:"labels"},O.map(n=>a.default.createElement("div",{key:n.toString(),className:"label"},n))))};return V.default=a.default.memo((0,a.forwardRef)(v)),V}var we=Ce();const pe=be(we);function ye(p,L){return`${p}?${L.toString()}`}const Ee=({maxPriceData:p})=>{const{currencyCode:L,currencySymbol:T}=ve.shopify,[a,k]=U.useState(0),[j,v]=U.useState(parseInt(p?.amount));U.useEffect(()=>{const o=new URLSearchParams(window.location.search),c=parseInt(o.get("minPrice")||"0"),d=parseInt(o.get("maxPrice")||p?.amount);k(c),v(d)},[p]);function e(o,c){const d=new URLSearchParams(window.location.search);d.set("minPrice",o.toString()),d.set("maxPrice",c.toString());const K=ye("/products",d);window.location.href=K.toString()}return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("p",{children:[T,a," ",p?.currencyCode||L]}),s.jsxs("p",{children:[T,j," ",p?.currencyCode||L]})]}),s.jsx(pe,{style:{border:"none",boxShadow:"none"},ruler:"false",label:"false",min:"0",max:`${p?.amount}`,minValue:a,maxValue:j,onInput:o=>{k(o.minValue),v(o.maxValue)}}),a===0&&j===parseInt(p?.amount)||s.jsx("button",{className:"btn btn-sm btn-primary w-full",onClick:()=>{e(a,j)},children:"Apply"})]})},ke=({categories:p,vendors:L,tags:T,maxPriceData:a,vendorsWithCounts:k,categoriesWithCounts:j})=>{const[v,e]=U.useState(new URLSearchParams(window.location.search)),o=v.getAll("b"),c=v.get("c"),d=u=>{const b=`${window.location.pathname}?${u.toString()}`;window.location.href=b.toString(),e(u)},K=u=>{const b=Y(u.toLowerCase()),l=new URLSearchParams(v.toString());l.getAll("b").includes(b)?l.delete("b",b):l.append("b",b),d(l)},$=u=>{const b=new URLSearchParams(v.toString());u===c?b.delete("c"):b.set("c",u),d(b)};return s.jsxs("div",{children:[s.jsxs("div",{children:[s.jsx("h5",{className:"mb-2 lg:text-xl",children:"Select Price Range"}),s.jsx("hr",{className:"border-border dark:border-darkmode-border"}),s.jsx("div",{className:"pt-4",children:s.jsx(Ee,{maxPriceData:a})})]}),s.jsxs("div",{children:[s.jsx("h5",{className:"mb-2 mt-4 lg:mt-6 lg:text-xl",children:"Product Categories"}),s.jsx("hr",{className:"border-border dark:border-darkmode-border"}),s.jsx("ul",{className:"mt-4 space-y-4",children:p.map(u=>s.jsxs("li",{className:`flex items-center justify-between cursor-pointer ${c===u.handle?"text-text-dark dark:text-darkmode-text-dark font-semibold":"text-text-light dark:text-darkmode-text-light"}`,onClick:()=>$(u.handle),children:[u.title,v.has("c")&&!v.has("b")?s.jsxs("span",{children:["(",u?.products?.edges.length||0,")"]}):s.jsx("span",{children:j.length>0?`(${j.find(b=>b.category===u.title)?.productCount||0})`:`(${u?.products?.edges.length||0})`})]},u.handle))})]}),L&&s.jsxs("div",{children:[s.jsx("h5",{className:"mb-2 mt-8 lg:mt-10 lg:text-xl",children:"Brands"}),s.jsx("hr",{className:"border-border dark:border-darkmode-border"}),s.jsx("ul",{className:"mt-4 space-y-4",children:L.map(u=>s.jsxs("li",{className:"flex items-center justify-between cursor-pointer text-text-light dark:text-darkmode-text-light",onClick:()=>K(u.vendor),children:[v.has("b")&&!v.has("c")&&!v.has("minPrice")&&!v.has("maxPrice")&&!v.has("q")&&!v.has("t")?s.jsxs("span",{children:[u.vendor," (",u.productCount,")"]}):s.jsx("span",{children:k.length>0?`${u.vendor} (${k.find(b=>b.vendor===u.vendor)?.productCount||0})`:`${u.vendor} (${u.productCount})`}),s.jsx("div",{className:"h-4 w-4 rounded-sm flex items-center justify-center border border-border dark:border-border/40",children:o.includes(Y(u.vendor.toLowerCase()))&&s.jsx(xe,{size:16})})]},u.vendor))})]}),T.length>0&&s.jsxs("div",{children:[s.jsx("h5",{className:"mb-2 mt-8 lg:mt-10 lg:text-xl",children:"Tags"}),s.jsx("hr",{className:"border-border dark:border-darkmode-border"}),s.jsx("div",{className:"mt-4",children:s.jsx(ge,{tags:T})})]})]})};export{ke as default};
